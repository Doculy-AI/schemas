{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/Doculy-AI/schemas/main/schemas/importers/arcgis.schema.json",
  "title": "ArcGIS Feature Layer Importer Configuration",
  "description": "Configuration for importing data from ArcGIS Feature Services",
  "type": "object",
  "required": ["url", "table"],
  "properties": {
    "url": {
      "type": "string",
      "format": "uri",
      "description": "ArcGIS Feature Service or Feature Layer URL",
      "examples": ["https://services.arcgis.com/xxx/arcgis/rest/services/LayerName/FeatureServer/0"]
    },
    "table": {
      "type": "string",
      "pattern": "^[a-z_][a-z0-9_]*$",
      "description": "Target PostgreSQL table name"
    },
    "schema": {
      "type": "string",
      "pattern": "^[a-z_][a-z0-9_]*$",
      "description": "Target PostgreSQL schema",
      "default": "public"
    },
    "where": {
      "type": "string",
      "description": "SQL WHERE clause to filter features",
      "examples": ["STATE = 'TX'", "POP > 1000"]
    },
    "fields": {
      "type": "array",
      "description": "Specific fields to import (imports all if not specified)",
      "items": {
        "type": "string"
      }
    },
    "geometryType": {
      "type": "string",
      "description": "Expected geometry type",
      "enum": ["point", "multipoint", "polyline", "polygon", "multipolygon"]
    },
    "srid": {
      "type": "integer",
      "description": "Target SRID for geometry transformation",
      "default": 4326
    },
    "truncate": {
      "type": "boolean",
      "description": "Truncate existing table before import",
      "default": false
    },
    "batchSize": {
      "type": "integer",
      "description": "Number of features to fetch per request",
      "minimum": 1,
      "maximum": 10000,
      "default": 1000
    }
  },
  "additionalProperties": false
}
